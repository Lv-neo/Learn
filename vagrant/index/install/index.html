<!DOCTYPE html>
<html lang="en">

<!-- layout.ejs-->
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="欢迎光临Neo的博客">
    <meta name="author" content="Neo">
    <meta name="keyword" content="">
    <link rel="canonical" href="https://lv-neo.github.io/Learn/Learn/vagrant/index/install/">
    <link rel="shortcut icon" href="https://cdn4.iconfinder.com/data/icons/ionicons/512/icon-person-128.png">
    <link rel="alternate" type="application/atom+xml" title="Neo&#39;s Blog" href="/atom.xml">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

    <title>
        
        使用vagrant构建开发测试环境｜Neo&#39;s Blog
        
    </title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <link rel="stylesheet" href="/Learn/css/main.css">

    
      <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
      <link rel="stylesheet" href="/Learn/css/highlight.css">
    

    
      <script id="dsq-count-scr" src="//hexo-a-rsnippet.disqus.com/count.js" async></script>
    


    

    

    


    

    




    <script async defer src="https://buttons.github.io/buttons.js"></script>

    <!-- user customization -->
    <link rel="stylesheet" href="/Learn/css/arsnippet.css">
    <script src="/Learn/js/arsnippet.css.js"></script>
</head>

<style>
    header.intro-header {
        background-image: url('')
    }
</style>
<!-- hack iOS CSS :active style -->
<body ontouchstart="" class="animated fadeIn">
<header>
  <nav class="navbar navbar-default header-navbar" id="nav-top" data-ispost="true" data-istags="false" data-ishome="false">
    <div class="container-fluid">
      <div class="navbar-header page-scroll">
        <button type="button" class="navbar-toggle" data-toggle="collapse" aria-expanded="false" data-target="#website_navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <span class="navbar-brand animated pulse">
          <a class="brand-logo" href="/Learn/">
            Neo's Blog
          </a>
        </span>
      </div>

      <div class="collapse navbar-collapse" id="website_navbar">
          <ul class="nav navbar-nav navbar-right">
              
                <li>
                  <a href="/Learn/">home</a>
                </li>
              
                <li>
                  <a href="/Learn/archives/">archives</a>
                </li>
              
                <li>
                  <a href="/Learn/tags/">tags</a>
                </li>
              
                <li>
                  <a href="/Learn/categories/">categories</a>
                </li>
              
          </ul>
      </div>
  </div></nav>


  
    <style>
       .intro-header {
          background-image: url('https://raw.githubusercontent.com/Lv-neo/Learn/master/sky-clouds-moon-horizon.jpg');
      }
    </style>

    <div class="intro-header">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 text-center">
                    <div class="site-heading">
                        <h1>使用vagrant构建开发测试环境</h1>
                        
                        
                          <span class="meta">
                               <span class="meta-item">Author: Neo</span>
                               <span class="meta-item">Date: Dec 17, 2018</span>
                               
                                 <span class="meta-item">Updated On: Dec 17, 2018</span>
                               
                          </span>
                          <div class="tags text-center">
                              Categories: 
                              <a class="tag" href="/Learn/categories/#vagrant" title="vagrant">vagrant</a>
                              
                          </div>
                          <div class="tags text-center">
                              Tags: 
                              <a class="tag" href="/Learn/tags/#vagrant" title="vagrant">vagrant</a>
                              
                          </div>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
  
</header>


<!-- Main Content -->
<!-- post.ejs -->
<article>
    <div class="container">
      <div class="col-lg-8 col-lg-offset-1 col-sm-9">
          
          
          <h1><span id="使用vagrant构建开发测试环境">使用vagrant构建开发测试环境</span></h1><h2><span id="安装virtualbox和vagrant">安装virtualBox和vagrant</span></h2><p><a href="https://www.virtualbox.org/wiki/Downloads" target="_blank" rel="noopener">VirtualBox官方下载</a><br><a href="https://www.vagrantup.com/downloads.html" target="_blank" rel="noopener">Vargant官方下载</a></p>
<h2><span id="下载一个box">下载一个box</span></h2><p>笔者选择的centos7.2<br><a href="https://www.vagrantup.com/docs/boxes.html" target="_blank" rel="noopener">vagrantup</a><br><a href="http://www.vagrantbox.es/" target="_blank" rel="noopener">vagrantbox</a></p>
<blockquote>
<p>速度太慢，请用离线下载或者下载工具，国内也有镜像资源</p>
</blockquote>
<h2><span id="添加box初始化vagrant-box">添加box，初始化vagrant box</span></h2><p>选择一个目录,开始构建<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ cd ~/project/</span><br><span class="line"></span><br><span class="line">$ vagrant box add /Users/Neo/Downloads/macTools/vagrant-centos-7.2.box --name centos7.2</span><br><span class="line">==&gt; box: Box file was not detected as metadata. Adding it directly...</span><br><span class="line">==&gt; box: Adding box &apos;centos7.2&apos; (v0) for provider: </span><br><span class="line">    box: Unpacking necessary files from: file:///Users/Neo/Downloads/macTools/vagrant-centos-7.2.box</span><br><span class="line">==&gt; box: Successfully added box &apos;centos7.2&apos; (v0) for &apos;virtualbox&apos;!</span><br><span class="line"></span><br><span class="line">$ vagrant box list</span><br><span class="line">centos7.2 (virtualbox, 0)</span><br><span class="line"></span><br><span class="line">$ vagrant init centos7.2</span><br><span class="line">A `Vagrantfile` has been placed in this directory. You are now</span><br><span class="line">ready to `vagrant up` your first virtual environment! Please read</span><br><span class="line">the comments in the Vagrantfile as well as documentation on</span><br><span class="line">`vagrantup.com` for more information on using Vagrant.</span><br></pre></td></tr></table></figure></p>
<p>这样目录中就会多出一个文件叫 Vagrantfile 所有的机关也就都在这里了，比如这里面有一句 config.vm.box = “centos7.2”这样</p>
<blockquote>
<p>我不用线上的原因是太慢，如果是团队开发，一个人构建好之后丢到服务器上最合适</p>
</blockquote>
<h2><span id="执行vagrant-up">执行vagrant up</span></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">$ vagrant up</span><br><span class="line">Bringing machine &apos;default&apos; up with &apos;virtualbox&apos; provider...</span><br><span class="line">==&gt; default: Importing base box &apos;centos7.2&apos;...</span><br><span class="line">==&gt; default: Matching MAC address for NAT networking...</span><br><span class="line">==&gt; default: Setting the name of the VM: project_default_1494056264311_10321</span><br><span class="line">==&gt; default: Clearing any previously set network interfaces...</span><br><span class="line">==&gt; default: Preparing network interfaces based on configuration...</span><br><span class="line">    default: Adapter 1: nat</span><br><span class="line">==&gt; default: Forwarding ports...</span><br><span class="line">    default: 22 =&gt; 2222 (adapter 1)</span><br><span class="line">==&gt; default: Booting VM...</span><br><span class="line">==&gt; default: Waiting for machine to boot. This may take a few minutes...</span><br><span class="line">    default: SSH address: 127.0.0.1:2222</span><br><span class="line">    default: SSH username: vagrant</span><br><span class="line">    default: SSH auth method: private key</span><br><span class="line">    default: Warning: Connection timeout. Retrying...</span><br><span class="line">    default: Warning: Remote connection disconnect. Retrying...</span><br><span class="line">    default: </span><br><span class="line">    default: Vagrant insecure key detected. Vagrant will automatically replace</span><br><span class="line">    default: this with a newly generated keypair for better security.</span><br><span class="line">    default: </span><br><span class="line">    default: Inserting generated public key within guest...</span><br><span class="line">    default: Removing insecure key from the guest if it&apos;s present...</span><br><span class="line">    default: Key inserted! Disconnecting and reconnecting using new SSH key...</span><br><span class="line">==&gt; default: Machine booted and ready!</span><br><span class="line">==&gt; default: Checking for guest additions in VM...</span><br><span class="line">    default: The guest additions on this VM do not match the installed version of</span><br><span class="line">    default: VirtualBox! In most cases this is fine, but in rare cases it can</span><br><span class="line">    default: prevent things such as shared folders from working properly. If you see</span><br><span class="line">    default: shared folder errors, please make sure the guest additions within the</span><br><span class="line">    default: virtual machine match the version of VirtualBox you have installed on</span><br><span class="line">    default: your host and reload your VM.</span><br><span class="line">    default: </span><br><span class="line">    default: Guest Additions Version: 4.3.30</span><br><span class="line">    default: VirtualBox Version: 5.0</span><br><span class="line">==&gt; default: Mounting shared folders...</span><br><span class="line">    default: /vagrant =&gt; /Users/Neo/project</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果你是用的网上的box，可能需要十几分钟以上，建议是放到内网或者本地</p>
</blockquote>
<h2><span id="访问虚拟机">访问虚拟机</span></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$  vagrant ssh</span><br><span class="line">[vagrant@localhost ~]$ uname -r</span><br><span class="line">3.10.0-327.4.5.el7.x86_64</span><br></pre></td></tr></table></figure>
<p>我们已经进入虚拟机了，登陆进来的用户名是 vagrant，这个用户挺好，执行 sudo 是不需要输入密码的，开发中实际使用挺好用的。不过如果我非要创建自己的用户也是可以的。</p>
<h2><span id="修改配置">修改配置</span></h2><p>关键步骤来了，vagrant默认配置不满足我们的需求</p>
<h3><span id="修改内存">修改内存</span></h3><p>默认内存512m<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">v.memory = 1024</span><br><span class="line">``` </span><br><span class="line">&gt; 你也可以进入VirtualBox修改，不过VagrantFile都可以搞定</span><br><span class="line"></span><br><span class="line">### 修改网络</span><br><span class="line"></span><br><span class="line">网络模式有3种</span><br><span class="line"></span><br><span class="line">* forwarded_port</span><br><span class="line">* private_network</span><br><span class="line">* public_network</span><br><span class="line"></span><br><span class="line">很简单，按照你的需求设置，个人开发环境建议设置为private_network</span><br></pre></td></tr></table></figure></p>
<p>config.vm.network “private_network”, ip: “192.168.222.111”<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt;协同开发，大家可以下载使用同一个VagrantFile，大部分配置相同，是不是很爽</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 修改共享目录</span><br><span class="line"></span><br><span class="line">我们需要制定共享目录的用户和权限，开发的代码就在共享目录里了。</span><br><span class="line"></span><br><span class="line">在这之前必须进入vagrant增加你需要的用户www，如果你直接用vagrant，就不需要</span><br></pre></td></tr></table></figure></p>
<p>config.vm.synced_folder “/Users/Neo/project”, “/vagrant”,create:true, :owner =&gt; “www”, :group =&gt; “www”, :mount_options =&gt; [“dmode=775”,”fmode=664”]<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 修改登录</span><br><span class="line">我比较喜欢crt或者xshell统一管理机器,在结尾加上</span><br></pre></td></tr></table></figure></p>
<p>  config.ssh.username = ‘vagrant’<br>  config.ssh.password = ‘vagrant’<br>  config.ssh.insert_key = ‘true’<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 重启</span><br></pre></td></tr></table></figure></p>
<p>vagrant reload<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### ssh免密登录</span><br></pre></td></tr></table></figure></p>
<h1><span id="现在我们进入vagrant-账号root密码vagrant">现在我们进入vagrant 账号root密码vagrant</span></h1><p>[root@localhost ~]# cd ~/<br>[root@localhost ~]# mkdir .ssh</p>
<h1><span id="纯净的没vim加上自己的sshkey">纯净的没vim，加上自己的sshkey</span></h1><p>[root@localhost ~]# vi authorized_keys</p>
<h1><span id="保存退出">保存退出</span></h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">在通过crt Publickey方式，完美无密码进入</span><br><span class="line"></span><br><span class="line">## 打包box</span><br><span class="line"></span><br><span class="line">装完你（团队）需要的环境之后，退出vagrant，我们打包成一个开发环境的box供大家使用</span><br></pre></td></tr></table></figure>
<p>vagrant package –output xxxx.box –vagrantfile file<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 获取远程仓库</span><br></pre></td></tr></table></figure></p>
<p>vagrant box add centos7.2 <a href="http://127.0.0.1/xxxx.box" target="_blank" rel="noopener">http://127.0.0.1/xxxx.box</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 附录：完整的vagrantFile</span><br></pre></td></tr></table></figure></p>
<h1><span id="-mode-ruby-">-<em>- mode: ruby -</em>-</span></h1><h1><span id="vi-set-ftruby">vi: set ft=ruby :</span></h1><h1><span id="all-vagrant-configuration-is-done-below-the-2-in-vagrantconfigure">All Vagrant configuration is done below. The “2” in Vagrant.configure</span></h1><h1><span id="configures-the-configuration-version-we-support-older-styles-for">configures the configuration version (we support older styles for</span></h1><h1><span id="backwards-compatibility-please-dont-change-it-unless-you-know-what">backwards compatibility). Please don’t change it unless you know what</span></h1><h1><span id="youre-doing">you’re doing.</span></h1><p>Vagrant.configure(2) do |config|</p>
<h1><span id="the-most-common-configuration-options-are-documented-and-commented-below">The most common configuration options are documented and commented below.</span></h1><h1><span id="for-a-complete-reference-please-see-the-online-documentation-at">For a complete reference, please see the online documentation at</span></h1><h1><span id="httpsdocsvagrantupcom">.</span></h1><h1><span id="every-vagrant-development-environment-requires-a-box-you-can-search-for">Every Vagrant development environment requires a box. You can search for</span></h1><h1><span id="boxes-at-httpsatlashashicorpcomsearch">boxes at .</span></h1><p>  config.vm.box = “centos7.2”</p>
<h1><span id="disable-automatic-box-update-checking-if-you-disable-this-then">Disable automatic box update checking. If you disable this, then</span></h1><h1><span id="boxes-will-only-be-checked-for-updates-when-the-user-runs">boxes will only be checked for updates when the user runs</span></h1><h1><span id="vagrant-box-outdated-this-is-not-recommended"><code>vagrant box outdated</code>. This is not recommended.</span></h1><h1><span id="configvmbox_check_update-false">config.vm.box_check_update = false</span></h1><h1><span id="create-a-forwarded-port-mapping-which-allows-access-to-a-specific-port">Create a forwarded port mapping which allows access to a specific port</span></h1><h1><span id="within-the-machine-from-a-port-on-the-host-machine-in-the-example-below">within the machine from a port on the host machine. In the example below,</span></h1><h1><span id="accessing-localhost8080-will-access-port-80-on-the-guest-machine">accessing “localhost:8080” will access port 80 on the guest machine.</span></h1><h1><span id="configvmnetwork-forwarded_port-guest-80-host-8080">config.vm.network “forwarded_port”, guest: 80, host: 8080</span></h1><h1><span id="create-a-private-network-which-allows-host-only-access-to-the-machine">Create a private network, which allows host-only access to the machine</span></h1><h1><span id="using-a-specific-ip">using a specific IP.</span></h1><p>  config.vm.network “private_network”, ip: “192.168.222.111”</p>
<h1><span id="create-a-public-network-which-generally-matched-to-bridged-network">Create a public network, which generally matched to bridged network.</span></h1><h1><span id="bridged-networks-make-the-machine-appear-as-another-physical-device-on">Bridged networks make the machine appear as another physical device on</span></h1><h1><span id="your-network">your network.</span></h1><h1><span id="configvmnetwork-public_network">config.vm.network “public_network”</span></h1><h1><span id="share-an-additional-folder-to-the-guest-vm-the-first-argument-is">Share an additional folder to the guest VM. The first argument is</span></h1><h1><span id="the-path-on-the-host-to-the-actual-folder-the-second-argument-is">the path on the host to the actual folder. The second argument is</span></h1><h1><span id="the-path-on-the-guest-to-mount-the-folder-and-the-optional-third">the path on the guest to mount the folder. And the optional third</span></h1><h1><span id="argument-is-a-set-of-non-required-options">argument is a set of non-required options.</span></h1><p>  config.vm.synced_folder “/Users/Neo/project”, “/vagrant”,create:true, :owner =&gt; “www-data”, :group =&gt; “www-data”, :mount_options =&gt; [“dmode=775”,”fmode=664”]</p>
<h1><span id="provider-specific-configuration-so-you-can-fine-tune-various">Provider-specific configuration so you can fine-tune various</span></h1><h1><span id="backing-providers-for-vagrant-these-expose-provider-specific-options">backing providers for Vagrant. These expose provider-specific options.</span></h1><h1><span id="example-for-virtualbox">Example for VirtualBox:</span></h1><p>  #</p>
<h1><span id="configvmprovider-virtualbox-do-vb">config.vm.provider “virtualbox” do |vb|</span></h1><h1><span id="display-the-virtualbox-gui-when-booting-the-machine"># Display the VirtualBox GUI when booting the machine</span></h1><h1><span id="vbgui-true">vb.gui = true</span></h1><p>  #</p>
<h1><span id="customize-the-amount-of-memory-on-the-vm"># Customize the amount of memory on the VM:</span></h1><h1><span id="vbmemory-1024">vb.memory = “1024”</span></h1><h1><span id="end">end</span></h1><p>  #</p>
<h1><span id="view-the-documentation-for-the-provider-you-are-using-for-more">View the documentation for the provider you are using for more</span></h1><h1><span id="information-on-available-options">information on available options.</span></h1><h1><span id="define-a-vagrant-push-strategy-for-pushing-to-atlas-other-push-strategies">Define a Vagrant Push strategy for pushing to Atlas. Other push strategies</span></h1><h1><span id="such-as-ftp-and-heroku-are-also-available-see-the-documentation-at">such as FTP and Heroku are also available. See the documentation at</span></h1><h1><span id="httpsdocsvagrantupcomv2pushatlashtml-for-more-information"> for more information.</span></h1><h1><span id="configpushdefine-atlas-do-push">config.push.define “atlas” do |push|</span></h1><h1><span id="pushapp-your_atlas_usernameyour_application_name">push.app = “YOUR_ATLAS_USERNAME/YOUR_APPLICATION_NAME”</span></h1><h1><span id="end">end</span></h1><h1><span id="enable-provisioning-with-a-shell-script-additional-provisioners-such-as">Enable provisioning with a shell script. Additional provisioners such as</span></h1><h1><span id="puppet-chef-ansible-salt-and-docker-are-also-available-please-see-the">Puppet, Chef, Ansible, Salt, and Docker are also available. Please see the</span></h1><h1><span id="documentation-for-more-information-about-their-specific-syntax-and-use">documentation for more information about their specific syntax and use.</span></h1><h1><span id="configvmprovision-shell-inline-ltlt-shell">config.vm.provision “shell”, inline: &lt;&lt;-SHELL</span></h1><h1><span id="sudo-apt-get-update">sudo apt-get update</span></h1><h1><span id="sudo-apt-get-install-y-apache2">sudo apt-get install -y apache2</span></h1><h1><span id="shell">SHELL</span></h1><p>  config.ssh.username = ‘vagrant’<br>  config.ssh.password = ‘vagrant’<br>  config.ssh.insert_key = ‘true’<br>end</p>
<p><code>`</code></p>

          
          <hr>
          <ul class="pager">
              
              <li class="previous">
                  <a href="/Learn/docker/index/" data-toggle="tooltip" data-placement="left" title="docker">&larr; Previous Post</a>
              </li>
              
              
              <li class="next">
                  <a href="/Learn/vagrant/index/" data-toggle="tooltip" data-placement="top" title="vagrant">Next Post&rarr;</a>
              </li>
              
          </ul>
        
  <br>
  
  <!-- disqus start -->
  <div class="comment">
    <div id="disqus_thread" class="disqus-thread"></div>
      <script>
      var disqus_shortname = 'hexo-a-rsnippet';
      
      var disqus_url = 'https://lv-neo.github.io/Learn/vagrant/index/install/';
      
      (function(){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
  <!-- disqus end -->
  

  
  


      </div>
      <!-- sidebar-profile.ejs -->
<div class="
        col-lg-3 col-lg-offset-0
        col-md-3 col-md-offset-0
        col-sm-12
        col-xs-12
        sidebar-container
    ">
    <section class="visible-md visible-lg" style="padding: 0 18px">
        <div class="short-about">
            
                <img src="https://github.com/Lv-neo/Learn/blob/master/me.jpg?raw=true" class="avatar">
            
            <h3>Neo</h3>
            
                <p>data scientist</p>
            
            <hr>
            <ul class="list-inline">
                
                
                

                

                

                

                

                

            </ul>
            
        </div>
    </section>
</div>

      
  <div class="hidden-xs col-sm-3 toc-col">
    <div class="toc-wrap">
        Table of Contents
        
          <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">1.</span> <span class="toc-text">使用vagrant构建开发测试环境</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#undefined"><span class="toc-number">1.1.</span> <span class="toc-text">安装virtualBox和vagrant</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#undefined"><span class="toc-number">1.2.</span> <span class="toc-text">下载一个box</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#undefined"><span class="toc-number">1.3.</span> <span class="toc-text">添加box，初始化vagrant box</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#undefined"><span class="toc-number">1.4.</span> <span class="toc-text">执行vagrant up</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#undefined"><span class="toc-number">1.5.</span> <span class="toc-text">访问虚拟机</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#undefined"><span class="toc-number">1.6.</span> <span class="toc-text">修改配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">1.6.1.</span> <span class="toc-text">修改内存</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">2.</span> <span class="toc-text">现在我们进入vagrant 账号root密码vagrant</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">3.</span> <span class="toc-text">纯净的没vim，加上自己的sshkey</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">4.</span> <span class="toc-text">保存退出</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">5.</span> <span class="toc-text">-- mode: ruby --</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">6.</span> <span class="toc-text">vi: set ft=ruby :</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">7.</span> <span class="toc-text">All Vagrant configuration is done below. The “2” in Vagrant.configure</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">8.</span> <span class="toc-text">configures the configuration version (we support older styles for</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">9.</span> <span class="toc-text">backwards compatibility). Please don’t change it unless you know what</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">10.</span> <span class="toc-text">you’re doing.</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">11.</span> <span class="toc-text">The most common configuration options are documented and commented below.</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">12.</span> <span class="toc-text">For a complete reference, please see the online documentation at</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">13.</span> <span class="toc-text">.</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">14.</span> <span class="toc-text">Every Vagrant development environment requires a box. You can search for</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">15.</span> <span class="toc-text">boxes at .</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">16.</span> <span class="toc-text">Disable automatic box update checking. If you disable this, then</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">17.</span> <span class="toc-text">boxes will only be checked for updates when the user runs</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">18.</span> <span class="toc-text">vagrant box outdated. This is not recommended.</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">19.</span> <span class="toc-text">config.vm.box_check_update = false</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">20.</span> <span class="toc-text">Create a forwarded port mapping which allows access to a specific port</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">21.</span> <span class="toc-text">within the machine from a port on the host machine. In the example below,</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">22.</span> <span class="toc-text">accessing “localhost:8080” will access port 80 on the guest machine.</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">23.</span> <span class="toc-text">config.vm.network “forwarded_port”, guest: 80, host: 8080</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">24.</span> <span class="toc-text">Create a private network, which allows host-only access to the machine</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">25.</span> <span class="toc-text">using a specific IP.</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">26.</span> <span class="toc-text">Create a public network, which generally matched to bridged network.</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">27.</span> <span class="toc-text">Bridged networks make the machine appear as another physical device on</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">28.</span> <span class="toc-text">your network.</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">29.</span> <span class="toc-text">config.vm.network “public_network”</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">30.</span> <span class="toc-text">Share an additional folder to the guest VM. The first argument is</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">31.</span> <span class="toc-text">the path on the host to the actual folder. The second argument is</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">32.</span> <span class="toc-text">the path on the guest to mount the folder. And the optional third</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">33.</span> <span class="toc-text">argument is a set of non-required options.</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">34.</span> <span class="toc-text">Provider-specific configuration so you can fine-tune various</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">35.</span> <span class="toc-text">backing providers for Vagrant. These expose provider-specific options.</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">36.</span> <span class="toc-text">Example for VirtualBox:</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">37.</span> <span class="toc-text">config.vm.provider “virtualbox” do |vb|</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">38.</span> <span class="toc-text"># Display the VirtualBox GUI when booting the machine</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">39.</span> <span class="toc-text">vb.gui = true</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">40.</span> <span class="toc-text"># Customize the amount of memory on the VM:</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">41.</span> <span class="toc-text">vb.memory = “1024”</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">42.</span> <span class="toc-text">end</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">43.</span> <span class="toc-text">View the documentation for the provider you are using for more</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">44.</span> <span class="toc-text">information on available options.</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">45.</span> <span class="toc-text">Define a Vagrant Push strategy for pushing to Atlas. Other push strategies</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">46.</span> <span class="toc-text">such as FTP and Heroku are also available. See the documentation at</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">47.</span> <span class="toc-text"> for more information.</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">48.</span> <span class="toc-text">config.push.define “atlas” do |push|</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">49.</span> <span class="toc-text">push.app = “YOUR_ATLAS_USERNAME/YOUR_APPLICATION_NAME”</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">50.</span> <span class="toc-text">end</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">51.</span> <span class="toc-text">Enable provisioning with a shell script. Additional provisioners such as</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">52.</span> <span class="toc-text">Puppet, Chef, Ansible, Salt, and Docker are also available. Please see the</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">53.</span> <span class="toc-text">documentation for more information about their specific syntax and use.</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">54.</span> <span class="toc-text">config.vm.provision “shell”, inline: &lt;&lt;-SHELL</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">55.</span> <span class="toc-text">sudo apt-get update</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">56.</span> <span class="toc-text">sudo apt-get install -y apache2</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">57.</span> <span class="toc-text">SHELL</span></a></li></ol>
        
    </div>
  </div>


  </div>
</article>

<!-- Footer -->
<!-- footer.ejs -->
<footer>
    <div class="text-center">
      <ul class="list-inline">
          
          
          

          

          

          

          

          

      </ul>
     <div class="text-muted copyright">
            &copy;
            
              2018
            
            
              <i class="fa fa-heart"></i>
            
            neo
        <br>
          
              Powered by <a target="_blank" href="https://hexo.io">Hexo</a>
          
          
            |
          
          
              Theme - <a href="https://github.com/huyingjie/hexo-theme-A-RSnippet" target="_blank">A-RSnippet</a> v0.1.0
          
          
      </div>
    </div>
</footer>

<!-- Custom Theme JavaScript -->
<script src="/Learn/js/main.js"></script>

<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!--fastClick.js -->
<script>
    async("//cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>



</body>

</html>
